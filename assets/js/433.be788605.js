"use strict";(self.webpackChunkchat_2_db=self.webpackChunkchat_2_db||[]).push([[433],{86531:(e,t,i)=>{i.d(t,{T:()=>d});var a=i(65733),s=i(41280);const n=["<a>","<b>","<i>","<q>","<s>"];function r(e){let t=s.j.exec(e);for(;t;)e=e.replace(t[0],`<b>${t[1]}</b>`),t=s.j.exec(e);let i=s.k.exec(e);for(;i;)e=e.replace(i[0],`<i>${i[1]}</i>`),i=s.k.exec(e);let a=s.l.exec(e);for(;a;)e=e.replace(a[0],`<s>${a[1]}</s>`),a=s.l.exec(e);e=(e=e.split(" ").map((e=>{if(s.m.test(e)){const t=s.m.exec(e);return e.replace(t[0],`<a>${t[0]}</a>`)}return e})).join(" ")).split(" ").map(((e,t)=>">"!==e||0!==t&&">"!==e[t-1]?e:"<q></q>")).join(" ");const[n]=o(e);return n}const o=(e,t="")=>{const i=[];if(0===e.length)return[i,0];let a=0;for(;a<e.length;){if(t.length&&t===e.substring(a,a+t.length))return[i,a+t.length];if(n.includes(e.substring(a,a+3))){const[t,s]=o(e.substring(a+3),`</${e[a+1]}>`);i.push({type:e[a+1],content:1===t.length&&"plain_text"===t[0].type?t[0].content:t}),a+=s+3}else{let t=i[i.length-1];t&&"plain_text"===t.type||(i.push({type:"plain_text",content:""}),t=i[i.length-1]),t.content+=e[a],a++}}return[i,a]},l=(e,t,i)=>0===e.trim().length?`${t}${e}${t}`:i(e),c=e=>e.map((e=>{switch(e.type){case"a":if("string"==typeof e.content)return(e=>{let t=e;return s.n.test(t)?t=`mailto:${t}`:/^(?![A-Za-z]{3,9}?:\/\/)/.test(t)&&(t=`https://${t}`),(0,a.h)("a",{class:"link",href:t,target:"_blank",rel:"noopener noreferrer"},e)})(e.content);case"b":return"string"==typeof(t=e.content)?l(t,"*",(e=>(0,a.h)("b",null,e))):(0,a.h)("b",null,c(t));case"i":return(e=>"string"==typeof e?l(e,"_",(e=>(0,a.h)("i",null,e))):(0,a.h)("i",null,c(e)))(e.content);case"s":return(e=>"string"==typeof e?l(e,"~",(e=>(0,a.h)("s",null,e))):(0,a.h)("b",null,c(e)))(e.content);case"q":return(0,a.h)("span",{class:"block-quote"});default:return(e=>"string"==typeof e?e:(0,a.h)("p",null,c(e)))(e.content)}var t})),d=({message:e})=>{const t=(0,s.f)(e,!0),i=(0,s.s)(e);return(0,a.h)("p",null,0!==t.length&&(0,a.h)("blockquote",null,t.split("\n").map((e=>{const t=r(e);return(0,a.h)("p",null,c(t))}))),i.split("\n").map((e=>{const t=r(e);return(0,a.h)("p",null,c(t))})))}},40433:(e,t,i)=>{i.r(t),i.d(t,{dyte_chat:()=>u,dyte_participants:()=>v,dyte_plugins:()=>y,dyte_polls:()=>b,dyte_sidebar_ui:()=>m});var a=i(65733),s=i(68753),n=i(16619),r=i(41280),o=i(85114),l=i(27637),c=i(86531),d=i(86020),h=(i(21237),i(24555),i(46503)),p=i(85371),g=(i(60804),i(82321));const u=class{constructor(e){(0,a.r)(this,e),this.stateUpdate=(0,a.c)(this,"dyteStateUpdate",7),this.channelMap=new Map,this.disconnectMeeting=e=>{var t,i,a,s,n,r;this.isPrivateChatSupported()&&(null==e||e.participants.joined.removeListener("participantsUpdate",this.onParticipantUpdate),null==e||e.participants.joined.removeListener("participantLeft",this.onParticipantUpdate)),null===(t=null==e?void 0:e.chat)||void 0===t||t.removeListener("chatUpdate",this.chatUpdateListener),null===(i=null==e?void 0:e.chat)||void 0===i||i.removeListener("channelCreate",this.onChannelCreateOrUpdate),null===(a=null==e?void 0:e.chat)||void 0===a||a.removeListener("channelUpdate",this.onChannelCreateOrUpdate),null===(s=null==e?void 0:e.chat)||void 0===s||s.removeListener("channelMessageUpdate",this.onChannelCreateOrUpdate),null===(r=null===(n=null==e?void 0:e.participants)||void 0===n?void 0:n.all)||void 0===r||r.removeListener("participantsUpdate",this.onChannelCreateOrUpdate)},this.onParticipantUpdate=()=>{this.participants=this.meeting.participants.joined.toArray().filter((e=>0===this.privatePresetFilter.length||this.privatePresetFilter.includes(e.presetName))),this.selectedParticipant&&!this.participants.includes(this.selectedParticipant)&&(this.selectedParticipant=null,this.chatRecipientId=this.selectedGroup="everyone")},this.usePaginatedChat=()=>(0,l.u)(this.meeting),this.updateUnreadCountGroups=e=>{this.unreadCountGroups=Object.assign(Object.assign({},this.unreadCountGroups),e)},this.isPrivateChatSupported=()=>{var e,t,i;return!(0,l.u)(this.meeting)&&this.canPrivateMessage&&!this.disablePrivateChat&&"socket-service"===(null===(i=null===(t=null===(e=this.meeting)||void 0===e?void 0:e.__internals__)||void 0===t?void 0:t.features)||void 0===i?void 0:i.getFeatureValue("chat_socket_server"))},this.updateRecipients=e=>{if("string"==typeof e.detail)this.chatRecipientId="everyone",this.selectedParticipant=null;else{const{userId:t}=e.detail;this.chatRecipientId=t,this.selectedParticipant=this.participants.find((e=>e.userId===t))}if("everyone"!==this.chatRecipientId){const e=[this.chatRecipientId,this.meeting.self.userId],t=(0,r.g)(e);this.selectedGroup=t}else this.selectedGroup="everyone";this.updateUnreadCountGroups({[this.selectedGroup]:0})},this.isTextMessagingAllowed=()=>"everyone"===this.chatRecipientId?this.canSend&&this.canSendTextMessage:this.canPrivateMessage&&this.canSendPrivateTexts,this.isFileMessagingAllowed=()=>"everyone"===this.chatRecipientId?this.canSend&&this.canSendFiles:this.canPrivateMessage&&this.canSendPrivateFiles,this.onChannelChanged=e=>{e.detail.includes(r.T)?this.createDMChannel(e.detail.replace(r.T,"")):this.selectedChannelId=e.detail,this.cleanup()},this.createDMChannel=async e=>{this.creatingChannel=!0;const t=await this.meeting.chat.createChannel("Direct Message",[e],{visibility:"private",isDirectMessage:!0});this.creatingChannel=!1,this.selectedChannelId=t.id},this.cleanup=()=>{this.editingMessage=null,this.replyMessage=null,this.searchQuery=""},this.onChannelCreateOrUpdate=e=>{e?this.channelMap.set(e.id,e):this.meeting.chat.channels.forEach((e=>this.channelMap.set(e.id,e)));const t=Array.from(this.channelMap.values()).filter((e=>!(0,r.i)(e))).sort(((e,t)=>(0,r.d)(e.displayName,t.displayName))),i=Array.from(this.channelMap.values()).filter(r.i).map((e=>Object.assign(Object.assign({},e),{displayName:this.getMemberDisplayName(e)}))),a=this.meeting.participants.all.toArray().filter((e=>{if(e.userId===this.meeting.self.userId)return!1;const t=(0,r.e)([this.meeting.self.userId,e.userId]);return i.every((e=>(0,r.e)(e.memberIds)!==t))})).map((e=>({id:`${r.T}${e.userId}`,displayName:e.name,displayPictureUrl:e.picture,isDirectMessage:!0,unreadCount:0}))),s=[...i,...a].sort(((e,t)=>(0,r.d)(e.displayName,t.displayName)));this.channels=[...t,...s]},this.getMemberDisplayName=e=>{var t;let i;i=1===e.memberIds.length?e.memberIds[0]:e.memberIds[0]===this.meeting.self.userId?e.memberIds[1]:e.memberIds[0];const a=this.meeting.participants.all.toArray().find((e=>e.userId===i));return null!==(t=null==a?void 0:a.name)&&void 0!==t?t:i},this.onNewMessageHandler=async e=>{const t=e.detail;this.isChatViewType?(await this.meeting.chat.sendMessageToChannel(t,this.selectedChannelId,this.replyMessage?{replyTo:this.replyMessage}:{}),this.replyMessage=null):this.meeting.chat.sendMessage(t,this.getRecipientPeerIds())},this.onEditMessageHandler=async e=>{var t,i;await(null===(i=null===(t=this.meeting)||void 0===t?void 0:t.chat)||void 0===i?void 0:i.editTextMessage(e.detail.id,e.detail.message,e.detail.channelId)),this.editingMessage=null},this.onSearchHandler=async e=>{this.searchQuery=e.detail},this.onSearchDismissed=()=>{this.searchQuery=""},this.onChannelCreateClicked=()=>{this.stateUpdate.emit({activeChannelCreator:!0}),h.s.activeChannelCreator=!0},this.meeting=void 0,this.config=d.d,this.size=void 0,this.iconPack=s.d,this.t=(0,n.u)(),this.disablePrivateChat=!1,this.privatePresetFilter=[],this.unreadCountGroups={},this.chatGroups={everyone:[]},this.selectedGroup="everyone",this.now=new Date,this.dropzoneActivated=!1,this.showLatestMessageButton=!1,this.canSend=!1,this.canSendTextMessage=!1,this.canSendFiles=!1,this.canPrivateMessage=!1,this.canSendPrivateTexts=!1,this.canSendPrivateFiles=!1,this.emojiPickerEnabled=!1,this.chatRecipientId="everyone",this.participants=[],this.selectedParticipant=void 0,this.channels=[],this.selectedChannelId=void 0,this.editingMessage=null,this.replyMessage=null,this.searchQuery="",this.creatingChannel=!1}connectedCallback(){this.meeting&&(this.meetingChanged(this.meeting),this.meeting&&!this.meeting.chat||this.isFileMessagingAllowed()&&(this.host.addEventListener("dragover",(e=>{e.preventDefault(),this.dropzoneActivated=!0})),this.host.addEventListener("dragleave",(()=>{this.dropzoneActivated=!1})),this.host.addEventListener("drop",(e=>{e.preventDefault(),this.dropzoneActivated=!1,(0,r.h)(e.dataTransfer.items,((e,t)=>{var i,a,s,n;switch(e){case"image":this.isFileMessagingAllowed()&&(null===(a=null===(i=this.meeting)||void 0===i?void 0:i.chat)||void 0===a||a.sendImageMessage(t,this.getRecipientPeerIds()));break;case"file":this.isFileMessagingAllowed()&&(null===(n=null===(s=this.meeting)||void 0===s?void 0:s.chat)||void 0===n||n.sendFileMessage(t,this.getRecipientPeerIds()))}}))}))))}onEditMessageInit(e){e.detail.flags.isReply?this.replyMessage=e.detail.payload:e.detail.flags.isEdit&&(this.editingMessage=e.detail.payload)}disconnectedCallback(){this.disconnectMeeting(this.meeting)}meetingChanged(e,t){var i,a,s,n,o;if(null!=t&&this.disconnectMeeting(t),(!e||e.chat)&&null!=e){if(this.canSend=e.self.permissions.chatPublic.canSend,this.canSendTextMessage=e.self.permissions.chatPublic.text,this.canSendFiles=e.self.permissions.chatPublic.files,this.canPrivateMessage=!(!(null===(i=e.self.permissions.chatPrivate)||void 0===i?void 0:i.canSend)&&!(null===(a=e.self.permissions.chatPrivate)||void 0===a?void 0:a.canReceive)),this.canSendPrivateTexts=!!(null===(s=e.self.permissions.chatPrivate)||void 0===s?void 0:s.text),this.canSendPrivateFiles=!!(null===(n=e.self.permissions.chatPrivate)||void 0===n?void 0:n.files),this.isChatViewType="CHAT"===e.meta.viewType,this.isChatViewType){this.onChannelCreateOrUpdate();this.channels.filter((e=>!e.id.includes(r.T))).length&&(this.selectedChannelId=this.channels[0].id)}this.initializeChatGroups(),this.chatGroups=Object.assign({},this.chatGroups),this.chatUpdateListener=({message:e})=>{e.channelId||(this.addToChatGroup(e),this.chatGroups=Object.assign({},this.chatGroups))},this.onParticipantUpdate(),this.usePaginatedChat()||null===(o=e.chat)||void 0===o||o.addListener("chatUpdate",this.chatUpdateListener),this.isPrivateChatSupported()&&(e.participants.joined.addListener("participantJoined",this.onParticipantUpdate),e.participants.joined.addListener("participantLeft",this.onParticipantUpdate)),this.isChatViewType&&(e.chat.addListener("channelCreate",this.onChannelCreateOrUpdate),e.chat.addListener("channelUpdate",this.onChannelCreateOrUpdate),e.chat.addListener("channelMessageUpdate",this.onChannelCreateOrUpdate),e.participants.all.addListener("participantsUpdate",this.onChannelCreateOrUpdate))}}chatGroupsChanged(e){var t,i;if(!this.isPrivateChatSupported())return;const a={};for(const s in e){const n=null!==(t=o.c[s])&&void 0!==t?t:0;a[s]=e[s].filter((e=>"chat"==e.type&&e.message.time>n&&e.message.userId!==this.meeting.self.userId)).length,(s===(0,r.g)([this.meeting.self.userId,null===(i=this.selectedParticipant)||void 0===i?void 0:i.userId])||"everyone"===s&&null===this.selectedParticipant)&&(a[s]=0,o.c[s]=new Date)}this.updateUnreadCountGroups(a)}initializeChatGroups(){var e;null===(e=this.meeting.chat)||void 0===e||e.messages.forEach((e=>{this.addToChatGroup(e)}))}addToChatGroup(e){var t;const i=(0,r.p)(e);let a="everyone";if((null===(t=i.targetUserIds)||void 0===t?void 0:t.length)>0){const e=new Set([i.userId,...i.targetUserIds]);a=(0,r.g)(Array.from(e))}void 0===this.chatGroups[a]&&(this.chatGroups[a]=[]),this.chatGroups[a]=[...this.chatGroups[a],{type:"chat",message:i}]}getRecipientPeerIds(){let e=[];return"everyone"!==this.chatRecipientId&&(e=[this.selectedParticipant.id]),e}channelSwitchListener(e){this.onChannelChanged(e)}renderHeadlessComponents(){return(0,a.h)(a.F,null,(0,a.h)("dyte-dialog-manager",{meeting:this.meeting}),(0,a.h)("dyte-notifications",{meeting:this.meeting}))}renderComposerUI(){var e,t;if(this.isChatViewType&&0===this.channels.length)return null;if(this.isChatViewType&&""!==this.searchQuery)return null;if(this.isChatViewType&&!this.selectedChannelId)return null;const i={iconPack:this.iconPack,t:this.t,size:this.size},s={};return this.editingMessage?s.editMessage=this.editingMessage:this.replyMessage&&(s.replyMessage=this.replyMessage),(0,a.h)("dyte-chat-composer-ui",Object.assign({canSendTextMessage:this.isTextMessagingAllowed(),canSendFiles:this.isFileMessagingAllowed(),disableEmojiPicker:!!(null===(t=null===(e=this.meeting)||void 0===e?void 0:e.__internals__)||void 0===t?void 0:t.features.hasFeature(l.F.DISABLE_EMOJI_PICKER)),members:this.meeting.participants.all.toArray(),prefill:s,channelId:this.selectedChannelId,onDyteNewMessage:this.onNewMessageHandler,onDyteEditMessage:this.onEditMessageHandler,onDyteEditCancelled:()=>this.editingMessage=null},i),this.replyMessage&&(0,a.h)("div",{class:"quoted-message-container",slot:"chat-addon"},(0,a.h)("div",{class:"quoted-message scrollbar"},(0,a.h)(c.T,{message:this.replyMessage.message})),(0,a.h)("div",null,(0,a.h)("dyte-icon",{"aria-label":this.t("dismiss"),class:"dismiss",icon:this.iconPack.dismiss,onClick:()=>this.replyMessage=null,iconPack:this.iconPack,t:this.t}))))}renderFullChat(){if(this.creatingChannel)return(0,a.h)("div",{class:"banner"},(0,a.h)("dyte-spinner",{size:"lg"}));if(0===this.channels.length||!this.selectedChannelId)return(0,a.h)("div",{class:"banner"},(0,a.h)("dyte-icon",{icon:this.iconPack.create_channel_illustration,iconPack:this.iconPack,t:this.t,slot:"start",class:"create-channel-illustration"}),(0,a.h)("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"wide",variant:"primary",size:"md",onClick:this.onChannelCreateClicked,class:"welcome-new-channel"},(0,a.h)("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t,slot:"start"}),(0,a.h)("span",null,this.t("chat.new_channel"))));const e=this.channels.find((e=>e.id===this.selectedChannelId));return(0,a.h)("div",{class:"chat"},(0,a.h)("dyte-channel-header",{slot:"header",meeting:this.meeting,channel:e,onSearch:this.onSearchHandler,onSearchDismissed:this.onSearchDismissed}),""!==this.searchQuery&&(0,a.h)("dyte-chat-search-results",{meeting:this.meeting,query:this.searchQuery,channelId:this.selectedChannelId}),""===this.searchQuery&&(0,a.h)("dyte-chat-messages-ui-paginated",{meeting:this.meeting,size:this.size,iconPack:this.iconPack,t:this.t,selectedChannelId:this.selectedChannelId,selectedChannel:e}))}render(){var e,t;if(!this.meeting)return null;const i={iconPack:this.iconPack,t:this.t,size:this.size},s=null===(e=this.meeting)||void 0===e?void 0:e.self.userId,n=this.chatGroups[this.selectedGroup]||[];return(0,a.h)(a.H,null,this.isChatViewType&&this.renderHeadlessComponents(),(0,a.h)("div",{class:"chat-container"},this.isChatViewType&&(0,a.h)("dyte-channel-selector-ui",{channels:this.channels,onChannelChanged:this.onChannelChanged,selectedChannelId:this.selectedChannelId,showRecentMessage:!0},(0,a.h)("div",{class:"channel-selector-header",slot:"header"},(0,a.h)("dyte-logo",{meeting:this.meeting,config:this.config,t:this.t}),(0,a.h)("dyte-tooltip",{label:this.t("chat.new_channel"),iconPack:this.iconPack,t:this.t},(0,a.h)("dyte-button",{iconPack:this.iconPack,t:this.t,kind:"button",variant:"ghost",size:"md",onClick:this.onChannelCreateClicked,class:"channel-create-btn"},(0,a.h)("dyte-icon",{icon:this.iconPack.add,iconPack:this.iconPack,t:this.t}))))),(0,a.h)("div",{class:"chat"},this.isFileMessagingAllowed()&&(0,a.h)("div",{id:"dropzone",class:{active:this.dropzoneActivated},part:"dropzone"},(0,a.h)("dyte-icon",{icon:this.iconPack.attach,iconPack:this.iconPack,t:this.t}),(0,a.h)("p",null,this.t("chat.send_attachment"))),this.isPrivateChatSupported()&&(0,a.h)("dyte-chat-selector-ui",Object.assign({selfUserId:s,groups:this.participants,selectedGroupId:null===(t=this.selectedParticipant)||void 0===t?void 0:t.userId,unreadCounts:this.unreadCountGroups,onDyteChatGroupChanged:this.updateRecipients},i)),this.isChatViewType?this.renderFullChat():this.usePaginatedChat()?(0,a.h)("dyte-chat-messages-ui-paginated",{meeting:this.meeting,size:this.size,iconPack:this.iconPack,t:this.t}):(0,a.h)("dyte-chat-messages-ui",Object.assign({messages:n,selfUserId:s,selectedGroup:this.selectedGroup},i)),this.renderComposerUI())))}get host(){return(0,a.g)(this)}static get watchers(){return{meeting:["meetingChanged"],chatGroups:["chatGroupsChanged"]}}};u.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);display:flex;height:var(--dyte-space-12, 48px);align-items:center;justify-content:center;font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}#dropzone{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;display:none;flex-direction:column;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}#dropzone.active{display:flex;-webkit-animation:0.2s slide-up ease-in;animation:0.2s slide-up ease-in}dyte-chat-messages-ui,dyte-chat-messages-ui-paginated{flex:1 0 0}.chat-container{display:flex;height:100%;width:100%;flex-direction:row}.chat{display:flex;flex:1 1 0%;flex-direction:column}.banner{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.banner .welcome-new-channel{width:var(--dyte-space-48, 192px)}.banner .create-channel-illustration{height:var(--dyte-space-40, 160px);width:var(--dyte-space-40, 160px)}.quoted-message-container{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);margin-top:var(--dyte-space-2, 8px);display:flex;justify-content:space-between;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));border-radius:var(--dyte-border-radius-md, 8px);border:var(--dyte-border-width-sm, 1px) solid rgb(var(--dyte-colors-background-600, 60 60 60))}.quoted-message-container .quoted-message{flex:1 1 0%;padding:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);max-height:var(--dyte-space-24, 96px);overflow-y:auto;word-break:break-all}.quoted-message-container .quoted-message blockquote{display:none}.quoted-message-container dyte-icon.dismiss{margin-left:auto;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);padding:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.quoted-message-container dyte-icon.dismiss:hover{cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.quoted-message-container dyte-icon.dismiss{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.channel-selector-header{box-sizing:border-box;height:var(--dyte-space-16, 64px);padding:var(--dyte-space-4, 16px);display:flex;justify-content:space-between;border-left-width:var(--dyte-border-width-none, 0);border-right-width:var(--dyte-border-width-none, 0);border-bottom-width:var(--dyte-border-width-sm, 1px);border-top-width:var(--dyte-border-width-none, 0);border-style:solid;--tw-border-opacity:1;border-bottom-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-border-opacity))}.channel-selector-header .channel-create-btn{width:var(--dyte-space-8, 32px);justify-content:center}.channel-selector-header .channel-create-btn:hover{--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}";const v=class{constructor(e){(0,a.r)(this,e),this.onSearchInput=e=>{this.search=e.target.value},this.meeting=void 0,this.states=void 0,this.config=d.d,this.size=void 0,this.iconPack=s.d,this.t=(0,n.u)(),this.search=""}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){this.meeting}meetingChanged(e){}render(){const e={meeting:this.meeting,states:this.states||h.s,config:this.config,size:this.size,iconPack:this.iconPack,t:this.t};return(0,a.h)(a.H,null,(0,a.h)("div",{class:"search",part:"search"},(0,a.h)("dyte-icon",{icon:this.iconPack.search,part:"search-icon",iconPack:this.iconPack,t:this.t}),(0,a.h)("input",{type:"search",autocomplete:"off",placeholder:"Search",onInput:this.onSearchInput,part:"search-input"})),(0,a.h)("div",{class:"ctr scrollbar",part:"container"},(0,a.h)(p.R,{element:"dyte-participants-waiting-list",defaults:e}),(0,a.h)(p.R,{element:"dyte-participants-stage-queue",defaults:e}),(0,a.h)(p.R,{element:"dyte-participants-stage-list",defaults:e,props:{search:this.search}}),(0,a.h)(p.R,{element:"dyte-participants-viewer-list",defaults:e,props:{search:this.search}})))}static get watchers(){return{meeting:["meetingChanged"]}}};v.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);box-sizing:border-box;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);padding-bottom:var(--dyte-space-0, 0px);overflow-y:auto;flex-grow:1;flex-basis:0}.search{position:-webkit-sticky;position:sticky;box-sizing:border-box;display:flex;align-items:center;border-radius:var(--dyte-border-radius-sm, 4px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));margin-left:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-3, 12px);margin-top:var(--dyte-space-0, 0px);margin-bottom:var(--dyte-space-0, 0px)}.search dyte-icon{margin-left:var(--dyte-space-2, 8px);margin-right:var(--dyte-space-2, 8px);height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52))}.search input{box-sizing:border-box;height:var(--dyte-space-9, 36px);width:100%;padding-right:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255));outline:2px solid transparent;outline-offset:2px;border-radius:var(--dyte-border-radius-sm, 4px);font-size:14px}.search input::-moz-placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}.search input::placeholder{color:rgb(var(--dyte-colors-text-800, 255 255 255 / 0.76))}:host([size='md']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}:host([size='sm']) .search{margin-top:var(--dyte-space-4, 16px) !important;margin-bottom:var(--dyte-space-4, 16px) !important}";const y=class{constructor(e){(0,a.r)(this,e),this.stateUpdate=(0,a.c)(this,"dyteStateUpdate",7),this.close=()=>{this.stateUpdate.emit({activeSidebar:!1,sidebar:void 0}),h.s.activeSidebar=!1,h.s.sidebar=void 0},this.meeting=void 0,this.config=d.d,this.size=void 0,this.iconPack=s.d,this.t=(0,n.u)(),this.plugins=[],this.canStartPlugins=!1,this.canClosePlugin=!1,this.activatedPluginsId=[]}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;null===(e=this.meeting)||void 0===e||e.plugins.all.removeListener("stateUpdate",this.updateActivePlugins)}meetingChanged(e){null!=e&&(this.canStartPlugins=e.self.permissions.plugins.canStart,this.canClosePlugin=e.self.permissions.plugins.canClose,this.plugins=e.plugins.all.toArray().filter((t=>{var i;return!(null===(i=e.self.config.disabledPlugins)||void 0===i?void 0:i.includes(t.id))})),this.updateActivePlugins=()=>{this.activatedPluginsId=e.plugins.active.toArray().map((e=>e.id))},this.updateActivePlugins(),e.plugins.all.addListener("stateUpdate",this.updateActivePlugins))}render(){return(0,a.h)(a.H,null,(0,a.h)("ul",{class:"scrollbar"},this.plugins.map((e=>(0,a.h)("li",{key:e.name,class:"plugin"},(0,a.h)("div",{class:"metadata"},(0,a.h)("img",{src:e.picture}),(0,a.h)("div",{class:"name"},e.name)),!this.activatedPluginsId.includes(e.id)&&this.canStartPlugins&&(0,a.h)("div",{class:"buttons"},(0,a.h)("dyte-button",{kind:"icon",size:"lg",iconPack:this.iconPack,t:this.t,onClick:()=>{e.activate(),this.close()},"aria-label":`${this.t("activate")} ${e.name}`},(0,a.h)("dyte-icon",{icon:this.iconPack.rocket,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}))),this.activatedPluginsId.includes(e.id)&&this.canClosePlugin&&(0,a.h)("div",{class:"buttons"},(0,a.h)("dyte-button",{kind:"icon",size:"lg",onClick:()=>{e.deactivate()},iconPack:this.iconPack,t:this.t,"aria-label":`${this.t("close")} ${e.name}`},(0,a.h)("dyte-icon",{icon:this.iconPack.dismiss,tabIndex:-1,"aria-hidden":!0,iconPack:this.iconPack,t:this.t}))))))))}static get watchers(){return{meeting:["meetingChanged"]}}};y.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);margin-bottom:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin-left:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-0, 0px);margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-4, 16px);display:block;padding:var(--dyte-space-0, 0px);font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}ul{overflow-y:auto;padding:var(--dyte-space-0, 0px);flex-grow:1;flex-basis:0}.metadata{display:flex;align-items:center}.metadata img{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);border-radius:var(--dyte-border-radius-sm, 4px)}.metadata .name{margin-left:var(--dyte-space-2, 8px);font-weight:500}.plugin{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-2, 8px);padding-bottom:var(--dyte-space-2, 8px)}.plugin .buttons{display:flex;align-items:center}dyte-button:hover{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-opacity:1;--tw-ring-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-ring-opacity));--tw-ring-offset-width:2px;--tw-ring-offset-color:rgb(var(--dyte-colors-background-1000, 8 8 8))}";const b=class{constructor(e){(0,a.r)(this,e),this.onPollsUpdate=e=>{this.polls=[...e.polls]},this.meeting=void 0,this.config=d.d,this.size=void 0,this.iconPack=s.d,this.t=(0,n.u)(),this.create=!1,this.polls=void 0}connectedCallback(){this.meetingChanged(this.meeting)}disconnectedCallback(){var e;null!=this.meeting&&(null===(e=this.meeting.polls)||void 0===e||e.removeListener("pollsUpdate",this.onPollsUpdate))}meetingChanged(e){null!=e&&(e&&!e.polls||(this.polls=[...e.polls.items],e.polls.addListener("pollsUpdate",this.onPollsUpdate),this.onCreate=async t=>{this.create=!1,await e.polls.create(t.question,t.options,t.anonymous,t.hideVotes)},this.onVote=async(t,i)=>{await e.polls.vote(t,i)}))}toggleCreateState(){this.create=!this.create}componentDidRender(){(0,g.s)(this.pollEl)}render(){return(0,a.h)(a.H,null,(0,a.h)("div",{class:"ctr",part:"container"},(0,a.h)("div",{class:"polls-view scrollbar",ref:e=>this.pollEl=e,part:"polls"},this.polls.map((e=>{var t;return(0,a.h)("dyte-poll",{key:e.id,poll:e,onDyteVotePoll:e=>{this.onVote(e.detail.id,e.detail.index)},self:null===(t=this.meeting)||void 0===t?void 0:t.self.userId,iconPack:this.iconPack,t:this.t,permissions:this.meeting.self.permissions})})),this.create&&(0,a.h)("dyte-poll-form",{part:"poll-form",onDyteCreatePoll:e=>{this.onCreate(e.detail)},iconPack:this.iconPack,t:this.t})),this.meeting.self.permissions.polls.canCreate&&(0,a.h)("dyte-button",{kind:"wide",onClick:()=>this.toggleCreateState(),variant:this.create?"secondary":"primary",part:"button",iconPack:this.iconPack,t:this.t},this.create?this.t("polls.cancel"):this.t("polls.create"))))}static get watchers(){return{meeting:["meetingChanged"]}}};b.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}.scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}:host{margin-top:var(--dyte-space-2, 8px);display:flex;height:100%;width:100%;flex-direction:column;font-size:14px}*{box-sizing:border-box}.ctr{box-sizing:border-box;padding:var(--dyte-space-3, 12px);padding-top:var(--dyte-space-0, 0px);display:flex;flex:1 1 0%;flex-direction:column}.polls-view{overflow-y:auto;flex:1 1 0%;flex-basis:0}";const m=class{constructor(e){(0,a.r)(this,e),this.tabChange=(0,a.c)(this,"tabChange",7),this.sidebarClose=(0,a.c)(this,"sidebarClose",7),this.onClose=()=>{this.sidebarClose.emit()},this.view="sidebar",this.tabs=[],this.currentTab=void 0,this.iconPack=s.d,this.t=(0,n.u)()}render(){const e="full-screen"===this.view,t=this.tabs.find((e=>e.id===this.currentTab));return(0,a.h)(a.H,{class:this.view},(0,a.h)("dyte-button",{variant:"ghost",kind:"icon",class:"close",onClick:this.onClose,"aria-label":this.t("close")},(0,a.h)("dyte-icon",{icon:this.iconPack.dismiss})),t&&(0,a.h)("header",{class:"main-header"},(0,a.h)("h3",null,t.name)),e&&(0,a.h)("header",{class:"mobile-tabs"},this.tabs.map((e=>(0,a.h)("button",{onClick:()=>{this.tabChange.emit(e.id)},class:{active:this.currentTab===e.id}},e.name)))),(0,a.h)("slot",{name:this.currentTab}))}};m.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;height:100%;width:100%;font-family:var(--dyte-font-family, sans-serif);z-index:50;display:flex;flex-direction:column}:host([view='sidebar']){--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}:host([view='full-screen']){position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);max-width:100%;border:none}::slotted(*){flex-grow:1}.close{position:absolute;top:var(--dyte-space-2, 8px);left:var(--dyte-space-2, 8px)}.main-header{display:flex;height:var(--dyte-space-12, 48px);place-items:center;justify-content:center}.main-header,.mobile-tabs{flex-shrink:0}.mobile-tabs{display:flex;place-items:center;justify-content:space-evenly;border-bottom:1px solid rgb(var(--dyte-colors-background-700, 44 44 44))}.mobile-tabs button{margin:var(--dyte-space-0, 0px);border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent;padding:var(--dyte-space-0, 0px);color:rgb(var(--dyte-colors-text-600, 255 255 255 / 0.52));height:var(--dyte-space-10, 40px);cursor:pointer;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);font-weight:500;border-bottom:1px solid transparent}.mobile-tabs button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-border-opacity));--tw-text-opacity:1;color:rgba(var(--dyte-colors-brand-300, 73 124 253) / var(--tw-text-opacity))}header h3{font-size:14px;font-weight:500}@media only screen and (max-device-height: 480px) and (orientation: landscape){.main-header{display:none !important}}"},82321:(e,t,i)=>{i.d(t,{s:()=>a});const a=(e,t=!0)=>{null!=e&&e.scrollTo({top:e.scrollHeight,behavior:t?"smooth":"auto"})}}}]);